<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ChopChop - Favorites</title>
    <link rel="stylesheet" href="./styles/favorites.css" />
  </head>
  <body>
    <!-- Eyebrow Navigation -->
    <header class="header">
      <nav class="main-nav">
        <a class="logo" href="index.html">
          <img
            src="assets/logo.svg"
            alt="ChopChop logo"
            width="36"
            height="36"
          />
          <span>ChopChop</span>
        </a>

        <!-- Main Nav -->
        <ul class="nav-links">
          <li><a href="">Recipe Library</a></li>
          <li><a class="active" href="#">Favorites</a></li>
          <li><a href="./shoppingList.html">Shopping List</a></li>
        </ul>

        <!-- Profile -->
        <a class="pfp" href="#">
          <img src="assets/pfp.jpg" alt="Profile" width="36" height="36" />
        </a>
      </nav>
    </header>

    <!-- Main Content -->
    <main class="container">
      <!-- title header thing -->
      <section class="hero">
        <h1>Your Favorite Recipes</h1>
      </section>

      <!-- Page Control Buttons (will likely change to a popup or smth)-->
      <div class="controls">
        <button id="gridBtn">Grid</button>
        <button id="listBtn">List</button>
        <button id="filterBtn">Filter / Sort</button>
        <button id="addBtn">+ Add</button>
      </div>

      <!-- Grid View -->
      <section id="gridView" class="view">
        <div class="grid">
          <article class="card" data-id="1">
            <div class="card-top">
              <span class="dish">Lasagna</span>
              <button class="moreBtn">⋯</button>
            </div>
            <img src="assets/food.jpg" alt="Lasagna" class="thumbnail" />
            <div class="card-body">
              <p class="quickDesc">Italian · 60 min</p>
              <p class="summary">Hearty layers of pasta and cheese</p>
            </div>
          </article>
          <article class="card" data-id="2">
            <div class="card-top">
              <span class="dish">Sushi Bake</span>
              <button class="moreBtn">⋯</button>
            </div>
            <img src="assets/food.jpg" alt="Sushi bake" class="thumbnail" />
            <div class="card-body">
              <p class="quickDesc">Japanese · 30 min</p>
              <p class="summary">Spicy mayo, salmon, rice, and nori</p>
            </div>
          </article>
          <article class="card" data-id="3">
            <div class="card-top">
              <span class="dish">PB&J Sandwich</span>
              <button class="moreBtn">⋯</button>
            </div>
            <img src="assets/food.jpg" alt="PB&J sandwich" class="thumbnail" />
            <div class="card-body">
              <p class="quickDesc">American · 10 min</p>
              <p class="summary">Classic sweet and nutty sandwich</p>
            </div>
          </article>
        </div>
      </section>

      <!-- List View -->
      <section id="listView" class="view hidden">
        <ul class="list">
          <li class="list-item">
            <img src="assets/food.jpg" alt="Lasagna" class="list-thumb" />
            <div class="list-content">
              <h3>Lasagna</h3>
              <p>Italian · 60 min · Hearty layers of pasta and cheese</p>
            </div>
            <div class="list-actions">
              <button class="tinyBtn">Open</button>
              <button class="tinyBtn">Edit</button>
            </div>
          </li>
          <li class="list-item">
            <img src="assets/food.jpg" alt="Sushi bake" class="list-thumb" />
            <div class="list-content">
              <h3>Sushi Bake</h3>
              <p>Japanese · 30 min · Spicy mayo, salmon, rice, and nori</p>
            </div>
            <div class="list-actions">
              <button class="tinyBtn">Open</button>
              <button class="tinyBtn">Edit</button>
            </div>
          </li>
          <li class="list-item">
            <img src="assets/food.jpg" alt="PB&J sandwich" class="list-thumb" />
            <div class="list-content">
              <h3>PB&J Sandwich</h3>
              <p>American · 10 min · Classic sweet and nutty sandwich</p>
            </div>
            <div class="list-actions">
              <button class="tinyBtn">Open</button>
              <button class="tinyBtn">Edit</button>
            </div>
          </li>
        </ul>
      </section>

      <!-- Recipe Actions Modal -->
      <div id="recipeActions" class="modal hidden">
        <div class="modal-content">
          <h3>Recipe Actions</h3>
          <p>What would you like to do with this recipe?</p>
          <div class="modal-actions">
            <button id="openDetail" class="button">Open</button>
            <button id="editRecipe" class="button secondary">Edit</button>
            <button id="closeModal" class="button tertiary">Close</button>
          </div>
        </div>
      </div>

      <!-- Add Recipe Modal -->
      <button id="addRecipeBtn" class="floating-add-btn">+</button>

      <div id="addRecipeModal" class="modal hidden">
        <div class="modal-content">
          <button id="closeAddModal" class="close-btn">×</button>
          <h3>Add New Recipe</h3>

          <form id="addRecipeForm">
            <p><strong>Recipe Link</strong></p>
            <input type="url" id="link" placeholder="Paste recipe URL..." />

            <hr />

            <p><strong>Manual Entry</strong></p>

            <label for="ingredient">Ingredient</label>
            <input type="text" id="ingredient" placeholder="e.g., flour" />

            <label for="amount">Amount</label>
            <input type="number" id="amount" placeholder="e.g., 2" />

            <label for="unit">Unit</label>
            <select id="unit">
              <option value="lb">lb</option>
              <option value="oz">oz</option>
              <option value="ml">ml</option>
            </select>

            <label for="step">Step</label>
            <input
              type="text"
              id="step"
              placeholder="e.g., Mix all ingredients"
            />

            <div class="form-actions">
              <button type="button" id="addIngredient" class="button secondary">
                + Add Another
              </button>
              <button type="submit" class="button">Save Recipe</button>
            </div>
          </form>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer>
      <p>© ChopChop - Your Personal Recipe Library</p>
    </footer>

    <script>
      // View switching
      const gridView = document.getElementById("gridView");
      const listView = document.getElementById("listView");

      document.getElementById("gridBtn").onclick = () => showView(gridView);
      document.getElementById("listBtn").onclick = () => showView(listView);

      function showView(view) {
        gridView.classList.add("hidden");
        listView.classList.add("hidden");
        view.classList.remove("hidden");
      }

      // Recipe actions modal
      const recipeModal = document.getElementById("recipeActions");

      document.querySelectorAll(".moreBtn").forEach((btn) => {
        btn.onclick = () => {
          recipeModal.classList.remove("hidden");
        };
      });

      document.getElementById("closeModal").onclick = () => {
        recipeModal.classList.add("hidden");
      };

      // Add recipe modal
      const addModal = document.getElementById("addRecipeModal");
      const addForm = document.getElementById("addRecipeForm");

      // Open modal from both buttons
      document.getElementById("addRecipeBtn").onclick = openAddModal;
      document.getElementById("addBtn").onclick = openAddModal;

      function openAddModal() {
        addModal.classList.remove("hidden");
      }

      // Close modal
      document.getElementById("closeAddModal").onclick = () => {
        addModal.classList.add("hidden");
      };

      // Close when clicking outside modal
      addModal.onclick = (e) => {
        if (e.target === addModal) {
          addModal.classList.add("hidden");
        }
      };

      // Form submission
      addForm.onsubmit = (e) => {
        e.preventDefault();

        const formData = {
          link: document.getElementById("link").value,
          ingredient: document.getElementById("ingredient").value,
          amount: document.getElementById("amount").value,
          unit: document.getElementById("unit").value,
          step: document.getElementById("step").value,
        };

        // will connect this to DB later....
        console.log("New recipe:", formData);

        alert("Recipe saved!");
        addForm.reset();
        addModal.classList.add("hidden");
      };

      // Add ingredient button
      document.getElementById("addIngredient").onclick = () => {
        const ingredient = document.getElementById("ingredient").value;
        const amount = document.getElementById("amount").value;

        if (ingredient && amount) {
          // add to list/json obj or some other data structure later...
          alert(
            `Added ${amount} ${
              document.getElementById("unit").value
            } ${ingredient}`
          );
          document.getElementById("ingredient").value = "";
          document.getElementById("amount").value = "";
        }
      };
    </script>
  </body>
</html>
